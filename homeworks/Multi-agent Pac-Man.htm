
<!-- saved from url=(0065)http://web.stanford.edu/class/cs221/assignments/pacman/index.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
  <title>Multi-agent Pac-Man</title>
  <script src="./Multi-agent Pac-Man_files/main.js"></script><script src="./Multi-agent Pac-Man_files/MathJax.js">MathJax.Hub.Config({  extensions: ["tex2jax.js", "TeX/AMSmath.js", "TeX/AMSsymbols.js"],  tex2jax: {inlineMath: [["$", "$"]]},});</script><script src="./Multi-agent Pac-Man_files/jquery.min.js"></script><link rel="stylesheet" href="./Multi-agent Pac-Man_files/main.css">
  <script src="./Multi-agent Pac-Man_files/results.js"></script><style type="text/css">.MathJax_Preview {color: #888}
#MathJax_Message {position: fixed; left: 1em; bottom: 1.5em; background-color: #E6E6E6; border: 1px solid #959595; margin: 0px; padding: 2px 8px; z-index: 102; color: black; font-size: 80%; width: auto; white-space: nowrap}
#MathJax_MSIE_Frame {position: absolute; top: 0; left: 0; width: 0px; z-index: 101; border: 0px; margin: 0px; padding: 0px}
.MathJax_Error {color: #CC0000; font-style: italic}
</style>

<link rel="stylesheet" type="text/css" href="./Multi-agent Pac-Man_files/main.css">
<style type="text/css">.MathJax_Hover_Frame {border-radius: .25em; -webkit-border-radius: .25em; -moz-border-radius: .25em; -khtml-border-radius: .25em; box-shadow: 0px 0px 15px #83A; -webkit-box-shadow: 0px 0px 15px #83A; -moz-box-shadow: 0px 0px 15px #83A; -khtml-box-shadow: 0px 0px 15px #83A; border: 1px solid #A6D ! important; display: inline-block; position: absolute}
.MathJax_Menu_Button .MathJax_Hover_Arrow {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 4px; -webkit-border-radius: 4px; -moz-border-radius: 4px; -khtml-border-radius: 4px; font-family: 'Courier New',Courier; font-size: 9px; color: #F0F0F0}
.MathJax_Menu_Button .MathJax_Hover_Arrow span {display: block; background-color: #AAA; border: 1px solid; border-radius: 3px; line-height: 0; padding: 4px}
.MathJax_Hover_Arrow:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_Hover_Arrow:hover span {background-color: #CCC!important}
</style><style type="text/css">.MathJax_Display {text-align: center; margin: 1em 0em; position: relative; display: block!important; text-indent: 0; max-width: none; max-height: none; min-width: 0; min-height: 0; width: 100%}
.MathJax .merror {background-color: #FFFF88; color: #CC0000; border: 1px solid #CC0000; padding: 1px 3px; font-style: normal; font-size: 90%}
.MathJax .MJX-monospace {font-family: monospace}
.MathJax .MJX-sans-serif {font-family: sans-serif}
#MathJax_Tooltip {background-color: InfoBackground; color: InfoText; border: 1px solid black; box-shadow: 2px 2px 5px #AAAAAA; -webkit-box-shadow: 2px 2px 5px #AAAAAA; -moz-box-shadow: 2px 2px 5px #AAAAAA; -khtml-box-shadow: 2px 2px 5px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true'); padding: 3px 4px; z-index: 401; position: absolute; left: 0; top: 0; width: auto; height: auto; display: none}
.MathJax {display: inline; font-style: normal; font-weight: normal; line-height: normal; font-size: 100%; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; padding: 0; margin: 0}
.MathJax:focus, body :focus .MathJax {display: inline-table}
.MathJax.MathJax_FullWidth {text-align: center; display: table-cell!important; width: 10000em!important}
.MathJax img, .MathJax nobr, .MathJax a {border: 0; padding: 0; margin: 0; max-width: none; max-height: none; min-width: 0; min-height: 0; vertical-align: 0; line-height: normal; text-decoration: none}
img.MathJax_strut {border: 0!important; padding: 0!important; margin: 0!important; vertical-align: 0!important}
.MathJax span {display: inline; position: static; border: 0; padding: 0; margin: 0; vertical-align: 0; line-height: normal; text-decoration: none}
.MathJax nobr {white-space: nowrap!important}
.MathJax img {display: inline!important; float: none!important}
.MathJax * {transition: none; -webkit-transition: none; -moz-transition: none; -ms-transition: none; -o-transition: none}
.MathJax_Processing {visibility: hidden; position: fixed; width: 0; height: 0; overflow: hidden}
.MathJax_Processed {display: none!important}
.MathJax_ExBox {display: block!important; overflow: hidden; width: 1px; height: 60ex; min-height: 0; max-height: none}
.MathJax .MathJax_EmBox {display: block!important; overflow: hidden; width: 1px; height: 60em; min-height: 0; max-height: none}
.MathJax_LineBox {display: table!important}
.MathJax_LineBox span {display: table-cell!important; width: 10000em!important; min-width: 0; max-width: none; padding: 0; border: 0; margin: 0}
.MathJax .MathJax_HitBox {cursor: text; background: white; opacity: 0; filter: alpha(opacity=0)}
.MathJax .MathJax_HitBox * {filter: none; opacity: 1; background: transparent}
#MathJax_Tooltip * {filter: none; opacity: 1; background: transparent}
@font-face {font-family: MathJax_Blank; src: url('about:blank')}
</style><style type="text/css">#MathJax_About {position: fixed; left: 50%; width: auto; text-align: center; border: 3px outset; padding: 1em 2em; background-color: #DDDDDD; color: black; cursor: default; font-family: message-box; font-size: 120%; font-style: normal; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 15px; -webkit-border-radius: 15px; -moz-border-radius: 15px; -khtml-border-radius: 15px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_About.MathJax_MousePost {outline: none}
.MathJax_Menu {position: absolute; background-color: white; color: black; width: auto; padding: 5px 0px; border: 1px solid #CCCCCC; margin: 0; cursor: default; font: menu; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 5px; -webkit-border-radius: 5px; -moz-border-radius: 5px; -khtml-border-radius: 5px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_MenuItem {padding: 1px 2em; background: transparent}
.MathJax_MenuArrow {position: absolute; right: .5em; padding-top: .25em; color: #666666; font-size: .75em}
.MathJax_MenuActive .MathJax_MenuArrow {color: white}
.MathJax_MenuArrow.RTL {left: .5em; right: auto}
.MathJax_MenuCheck {position: absolute; left: .7em}
.MathJax_MenuCheck.RTL {right: .7em; left: auto}
.MathJax_MenuRadioCheck {position: absolute; left: .7em}
.MathJax_MenuRadioCheck.RTL {right: .7em; left: auto}
.MathJax_MenuLabel {padding: 1px 2em 3px 1.33em; font-style: italic}
.MathJax_MenuRule {border-top: 1px solid #DDDDDD; margin: 4px 3px}
.MathJax_MenuDisabled {color: GrayText}
.MathJax_MenuActive {background-color: #606872; color: white}
.MathJax_MenuDisabled:focus, .MathJax_MenuLabel:focus {background-color: #E8E8E8}
.MathJax_ContextMenu:focus {outline: none}
.MathJax_ContextMenu .MathJax_MenuItem:focus {outline: none}
#MathJax_AboutClose {top: .2em; right: .2em}
.MathJax_Menu .MathJax_MenuClose {top: -10px; left: -10px}
.MathJax_MenuClose {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; font-family: 'Courier New',Courier; font-size: 24px; color: #F0F0F0}
.MathJax_MenuClose span {display: block; background-color: #AAA; border: 1.5px solid; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; line-height: 0; padding: 8px 0 6px}
.MathJax_MenuClose:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_MenuClose:hover span {background-color: #CCC!important}
.MathJax_MenuClose:hover:focus {outline: none}
</style><style type="text/css">#MathJax_Zoom {position: absolute; background-color: #F0F0F0; overflow: auto; display: block; z-index: 301; padding: .5em; border: 1px solid black; margin: 0; font-weight: normal; font-style: normal; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; -webkit-box-sizing: content-box; -moz-box-sizing: content-box; box-sizing: content-box; box-shadow: 5px 5px 15px #AAAAAA; -webkit-box-shadow: 5px 5px 15px #AAAAAA; -moz-box-shadow: 5px 5px 15px #AAAAAA; -khtml-box-shadow: 5px 5px 15px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_ZoomOverlay {position: absolute; left: 0; top: 0; z-index: 300; display: inline-block; width: 100%; height: 100%; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
#MathJax_ZoomFrame {position: relative; display: inline-block; height: 0; width: 0}
#MathJax_ZoomEventTrap {position: absolute; left: 0; top: 0; z-index: 302; display: inline-block; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
</style></head>

<body onload="onLoad(&#39;pacman&#39;, &#39;Zhen Qin&#39;, 1)"><div style="visibility: hidden; overflow: hidden; position: absolute; top: 0px; height: 1px; width: auto; padding: 0px; border: 0px; margin: 0px; text-align: left; text-indent: 0px; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal;"><div id="MathJax_Hidden"></div></div><div id="MathJax_Message" style="display: none;"></div>
<!------------------------------------------------------------>
<div id="assignmentHeader"><div><div class="assignmentTitle">Multi-agent Pac-Man</div><div><b>Stanford CS221 Summer 2019</b></div></div><p>Owner CA: Zhen Qin</p><p>Version: 1</p><hr><div class="problemTitle">General Instructions</div><p>This (and every) assignment has a written part and a programming part.</p><p>The full assignment with our supporting code and scripts can be downloaded as <a href="http://web.stanford.edu/class/cs221/assignments/pacman.zip">pacman.zip</a>.</p><ol class="problem"><li class="writeup template">This icon means a written answer is expected in <code>pacman.pdf</code>.</li><li class="code template">This icon means you should write code in <code><a href="http://web.stanford.edu/class/cs221/assignments/pacman/submission.py">submission.py</a></code>.</li></ol><p>All written answers must be <b>in order</b> and <b>clearly and correctly labeled</b> to receive credit.</p><p>You should modify the code in <code><a href="http://web.stanford.edu/class/cs221/assignments/pacman/submission.py">submission.py</a></code> between <pre># BEGIN_YOUR_CODE</pre> and <pre># END_YOUR_CODE</pre> but you can add other helper functions outside this block if you want. Do not make changes to files other than <code><a href="http://web.stanford.edu/class/cs221/assignments/pacman/submission.py">submission.py</a></code>.</p><p>Your code will be evaluated on two types of test cases, <b>basic</b> and <b>hidden</b>, which you can see in <code><a href="http://web.stanford.edu/class/cs221/assignments/pacman/grader.py">grader.py</a></code>. Basic tests, which are fully provided to you, do not stress your code with large inputs or tricky corner cases. Hidden tests are more complex and do stress your code.  The inputs of hidden tests are provided in <code><a href="http://web.stanford.edu/class/cs221/assignments/pacman/grader.py">grader.py</a></code>, but the correct outputs are not. To run the tests, you will need to have <code><a href="http://web.stanford.edu/class/cs221/assignments/pacman/graderUtil.py">graderUtil.py</a></code> in the same directory as your code and <code><a href="http://web.stanford.edu/class/cs221/assignments/pacman/grader.py">grader.py</a></code>. Then, you can run all the tests by typing <pre>python grader.py</pre> This will tell you only whether you passed the basic tests. On the hidden tests, the script will alert you if your code takes too long or crashes, but does not say whether you got the correct output. You can also run a single test (e.g., <code>3a-0-basic</code>) by typing <pre>python grader.py 3a-0-basic</pre>We strongly encourage you to read and understand the test cases, create your own test cases, and not just blindly run <code><a href="http://web.stanford.edu/class/cs221/assignments/pacman/grader.py">grader.py</a></code>.</p><hr></div>

<blockquote>
<center>
<img src="./Multi-agent Pac-Man_files/pacman_multi_agent.png" width="359" height="197">
</center>
  <p><cite></cite></p><center>Pac-Man, now with ghosts.<br>
  Minimax, Expectimax.<br></center><p></p>
</blockquote>

<h3>Introduction</h3>
<p> For those of you not familiar with Pac-Man, it's a game where Pac-Man (the
yellow circle with a mouth in the above figure) moves around in a maze and
tries to eat as many <i>food pellets</i> (the small white dots) as possible, while
avoiding the ghosts (the other two agents with eyes in the above figure). If Pac-Man
eats all the food in a maze, it wins. The big white dots at the top-left and
bottom-right corner are <i>capsules</i>, which give Pac-Man power to eat ghosts in a
limited time window (but you won't be worrying about them for the required
part of the assignment). You can get familiar with the setting by playing a few
games of classic Pac-Man, which we come to just after this introduction.</p>

<p>In this project, you will design agents for the classic version of Pac-Man,
including ghosts. Along the way, you will implement both minimax and
expectimax searches.

</p><p>The base code for this project contains a lot of files (which
are listed towards the end of this page); you, however, <b>do not</b> need to
go through these files to complete the assignment. These are there only to
guide the more adventurous amongst you to the heart of Pac-Man. As in previous
assignments, you will be modifying only <code><a href="http://web.stanford.edu/class/cs221/assignments/pacman/submission.py">submission.py</a></code>. 

</p><p>A basic <code><a href="http://web.stanford.edu/class/cs221/assignments/pacman/grader.py">grader.py</a></code> has been included in the .zip file, but it only checks for timing issues, not functionality.</p>


<p></p>You can check that Pac-Man behaves as described in the problems, and run <code><a href="http://web.stanford.edu/class/cs221/assignments/pacman/grader.py">grader.py</a></code>
without timeout in order to test your implementation.

<h3>Warmup</h3>
<p>First, play a game of classic Pac-Man to get a feel for the assignment:

</p><pre>python pacman.py</pre>

You can always add <code>--frameTime 1</code> to the command line
to run in "demo mode" where the game pauses after
every frame.

<p>Now, run the provided <code>ReflexAgent</code> in <code><a href="http://web.stanford.edu/class/cs221/assignments/pacman/submission.py">submission.py</a></code>:

</p><pre>python pacman.py -p ReflexAgent</pre>

Note that it plays quite poorly even on simple layouts:

<pre>python pacman.py -p ReflexAgent -l testClassic</pre>

You can also try out the reflex agent on the default <code>mediumClassic</code> layout with one ghost or two.

<pre>python pacman.py -p ReflexAgent -k 1</pre>

<pre>python pacman.py -p ReflexAgent -k 2</pre>

<p><em>Note:</em> you can never have more ghosts than the <a href="http://web.stanford.edu/class/cs221/assignments/pacman/layouts/mediumClassic.lay">layout</a> permits.

</p><p><em>Options:</em> Default ghosts are random; you can also play for fun with slightly smarter directional ghosts using <code>-g DirectionalGhost</code>. You can also play multiple games in a row with <code>-n</code>. Turn off graphics with <code>-q</code> to run lots of games quickly.</p> 

So, now that you are familiar enough with the interface, inspect the <code>ReflexAgent</code> code carefully (in <code><a href="http://web.stanford.edu/class/cs221/assignments/pacman/submission.py">submission.py</a></code>) and make sure you understand what it's doing. The reflex agent code provides some helpful examples of methods that query the <code>GameState</code> (a <code>GameState</code> specifies the full game state, including the food, capsules, agent configurations and score changes: see <code><a href="http://web.stanford.edu/class/cs221/assignments/pacman/submission.py">submission.py</a></code> for further information and helper methods) for information, which you will be using in the actual coding part. We are giving an exhaustive and very detailed description below, for the sake of completeness and to save you from digging deeper into the starter code. The actual coding part is very small - so please be patient if you think there is too much writing. <br><br>

Note: if you wish to run Pac-Man in the terminal using a text-based interface,
check out the <code>terminal</code> directory.<br><br>

<div class="problemTitle">Problem 1: Minimax</div>

<ol class="problem">
  <li class="writeup" id="1a">[5 points]
    Before you code up Pac-Man
    as a minimax agent, notice that instead of just
    one adversary, Pac-Man could have multiple ghosts as adversaries. So we
    will extend the minimax algorithm from class (which had only one min stage
    for a single adversary) to the more general case of multiple adversaries. In
    particular, <i>your minimax tree will have multiple min layers (one for
      each ghost) for every max layer</i>.<br>
<p>Specifically, consider the limited depth tree minimax search with evaluation functions
taught in class. Suppose there
are <span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-1-Frame" tabindex="0" style=""><nobr><span class="math" id="MathJax-Span-1" style="width: 2.659em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.19em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.669em, 1002.09em, 2.711em, -999.997em); top: -2.497em; left: 0em;"><span class="mrow" id="MathJax-Span-2"><span class="mi" id="MathJax-Span-3" style="font-family: STIXGeneral-Italic;">n</span><span class="mo" id="MathJax-Span-4" style="font-family: STIXGeneral-Regular; padding-left: 0.263em;">+</span><span class="mn" id="MathJax-Span-5" style="font-family: STIXGeneral-Regular; padding-left: 0.263em;">1</span></span><span style="display: inline-block; width: 0px; height: 2.503em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.122em; border-left: 0px solid; width: 0px; height: 1.003em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-1">n+1</script> agents on the board, <span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-2-Frame" tabindex="0" style=""><nobr><span class="math" id="MathJax-Span-6" style="width: 4.846em; display: inline-block;"><span style="display: inline-block; position: relative; width: 4.013em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.93em, 1004.01em, 2.815em, -999.997em); top: -2.497em; left: 0em;"><span class="mrow" id="MathJax-Span-7"><span class="msubsup" id="MathJax-Span-8"><span style="display: inline-block; position: relative; width: 0.94em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.47em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-9" style="font-family: STIXGeneral-Italic;">a</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.523em;"><span class="mn" id="MathJax-Span-10" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">0</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-11" style="font-family: STIXGeneral-Regular;">,</span><span class="mo" id="MathJax-Span-12" style="font-family: STIXGeneral-Regular; padding-left: 0.211em;">…</span><span class="mo" id="MathJax-Span-13" style="font-family: STIXGeneral-Regular; padding-left: 0.211em;">,</span><span class="msubsup" id="MathJax-Span-14" style="padding-left: 0.211em;"><span style="display: inline-block; position: relative; width: 0.94em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.47em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-15" style="font-family: STIXGeneral-Italic;">a</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.523em;"><span class="mi" id="MathJax-Span-16" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">n</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.503em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left: 0px solid; width: 0px; height: 0.878em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-2">a_0,\ldots , a_n</script>, where <span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-3-Frame" tabindex="0" style=""><nobr><span class="math" id="MathJax-Span-17" style="width: 1.148em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.94em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(0.419em, 1000.94em, 1.305em, -999.997em); top: -0.987em; left: 0em;"><span class="mrow" id="MathJax-Span-18"><span class="msubsup" id="MathJax-Span-19"><span style="display: inline-block; position: relative; width: 0.94em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.47em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-20" style="font-family: STIXGeneral-Italic;">a</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.523em;"><span class="mn" id="MathJax-Span-21" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">0</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 0.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left: 0px solid; width: 0px; height: 0.878em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-3">a_0</script> is Pac-Man and
the rest are ghosts. Pac-Man acts as a max agent, and the ghosts act as min
agents. A single <i>depth</i> consists of all <span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-4-Frame" tabindex="0" style=""><nobr><span class="math" id="MathJax-Span-22" style="width: 2.659em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.19em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.669em, 1002.09em, 2.711em, -999.997em); top: -2.497em; left: 0em;"><span class="mrow" id="MathJax-Span-23"><span class="mi" id="MathJax-Span-24" style="font-family: STIXGeneral-Italic;">n</span><span class="mo" id="MathJax-Span-25" style="font-family: STIXGeneral-Regular; padding-left: 0.263em;">+</span><span class="mn" id="MathJax-Span-26" style="font-family: STIXGeneral-Regular; padding-left: 0.263em;">1</span></span><span style="display: inline-block; width: 0px; height: 2.503em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.122em; border-left: 0px solid; width: 0px; height: 1.003em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-4">n+1</script> agents making a move, so
depth 2 search will involve Pac-Man and each ghost moving two times. In other
words, a depth of 2 corresponds to a height of <span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-5-Frame" tabindex="0" style=""><nobr><span class="math" id="MathJax-Span-27" style="width: 4.065em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.388em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.669em, 1003.34em, 2.815em, -999.997em); top: -2.497em; left: 0em;"><span class="mrow" id="MathJax-Span-28"><span class="mn" id="MathJax-Span-29" style="font-family: STIXGeneral-Regular;">2</span><span class="mo" id="MathJax-Span-30" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-31" style="font-family: STIXGeneral-Italic;">n</span><span class="mo" id="MathJax-Span-32" style="font-family: STIXGeneral-Regular; padding-left: 0.263em;">+</span><span class="mn" id="MathJax-Span-33" style="font-family: STIXGeneral-Regular; padding-left: 0.263em;">1</span><span class="mo" id="MathJax-Span-34" style="font-family: STIXGeneral-Regular;">)</span></span><span style="display: inline-block; width: 0px; height: 2.503em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left: 0px solid; width: 0px; height: 1.128em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-5">2(n+1)</script> in the minimax game tree.
</p><p>
Write the recurrence for
<span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-6-Frame" tabindex="0" style=""><nobr><span class="math" id="MathJax-Span-35" style="width: 6.148em; display: inline-block;"><span style="display: inline-block; position: relative; width: 5.107em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.669em, 1005.05em, 2.815em, -999.997em); top: -2.497em; left: 0em;"><span class="mrow" id="MathJax-Span-36"><span class="msubsup" id="MathJax-Span-37"><span style="display: inline-block; position: relative; width: 3.023em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.68em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-38" style="font-family: STIXGeneral-Italic;">V<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.055em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.628em;"><span class="texatom" id="MathJax-Span-39"><span class="mrow" id="MathJax-Span-40"><span class="mtext" id="MathJax-Span-41" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">minmax</span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-42" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-43" style="font-family: STIXGeneral-Italic;">s</span><span class="mo" id="MathJax-Span-44" style="font-family: STIXGeneral-Regular;">,</span><span class="mi" id="MathJax-Span-45" style="font-family: STIXGeneral-Italic; padding-left: 0.211em;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.055em;"></span></span><span class="mo" id="MathJax-Span-46" style="font-family: STIXGeneral-Regular;">)</span></span><span style="display: inline-block; width: 0px; height: 2.503em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left: 0px solid; width: 0px; height: 1.191em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-6">V_{\text{minmax}}(s,d)</script> in math. You should express your answer in terms of the 
following functions:
<span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-7-Frame" tabindex="0" style=""><nobr><span class="math" id="MathJax-Span-47" style="width: 4.065em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.388em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.669em, 1003.34em, 2.815em, -999.997em); top: -2.497em; left: 0em;"><span class="mrow" id="MathJax-Span-48"><span class="mtext" id="MathJax-Span-49" style="font-family: STIXGeneral-Regular;">IsEnd</span><span class="mo" id="MathJax-Span-50" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-51" style="font-family: STIXGeneral-Italic;">s</span><span class="mo" id="MathJax-Span-52" style="font-family: STIXGeneral-Regular;">)</span></span><span style="display: inline-block; width: 0px; height: 2.503em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left: 0px solid; width: 0px; height: 1.191em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-7">\text{IsEnd}(s)</script>, which tells you if <span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-8-Frame" tabindex="0" style=""><nobr><span class="math" id="MathJax-Span-53" style="width: 0.471em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.367em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.93em, 1000.37em, 2.659em, -999.997em); top: -2.497em; left: 0em;"><span class="mrow" id="MathJax-Span-54"><span class="mi" id="MathJax-Span-55" style="font-family: STIXGeneral-Italic;">s</span></span><span style="display: inline-block; width: 0px; height: 2.503em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 0.691em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-8">s</script> is an end state;
<span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-9-Frame" tabindex="0" style=""><nobr><span class="math" id="MathJax-Span-56" style="width: 4.378em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.648em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.669em, 1003.6em, 2.867em, -999.997em); top: -2.497em; left: 0em;"><span class="mrow" id="MathJax-Span-57"><span class="mtext" id="MathJax-Span-58" style="font-family: STIXGeneral-Regular;">Utility</span><span class="mo" id="MathJax-Span-59" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-60" style="font-family: STIXGeneral-Italic;">s</span><span class="mo" id="MathJax-Span-61" style="font-family: STIXGeneral-Regular;">)</span></span><span style="display: inline-block; width: 0px; height: 2.503em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 1.191em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-9">\text{Utility}(s)</script>, the utility of a state;
<span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-10-Frame" tabindex="0" style=""><nobr><span class="math" id="MathJax-Span-62" style="width: 3.44em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.867em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.669em, 1002.82em, 2.815em, -999.997em); top: -2.497em; left: 0em;"><span class="mrow" id="MathJax-Span-63"><span class="mtext" id="MathJax-Span-64" style="font-family: STIXGeneral-Regular;">Eval</span><span class="mo" id="MathJax-Span-65" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-66" style="font-family: STIXGeneral-Italic;">s</span><span class="mo" id="MathJax-Span-67" style="font-family: STIXGeneral-Regular;">)</span></span><span style="display: inline-block; width: 0px; height: 2.503em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left: 0px solid; width: 0px; height: 1.191em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-10">\text{Eval}(s)</script>, an evaluation function for the state <span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-11-Frame" tabindex="0" style=""><nobr><span class="math" id="MathJax-Span-68" style="width: 0.471em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.367em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.93em, 1000.37em, 2.659em, -999.997em); top: -2.497em; left: 0em;"><span class="mrow" id="MathJax-Span-69"><span class="mi" id="MathJax-Span-70" style="font-family: STIXGeneral-Italic;">s</span></span><span style="display: inline-block; width: 0px; height: 2.503em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 0.691em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-11">s</script>;
<span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-12-Frame" tabindex="0" style=""><nobr><span class="math" id="MathJax-Span-71" style="width: 4.273em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.544em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.669em, 1003.49em, 2.867em, -999.997em); top: -2.497em; left: 0em;"><span class="mrow" id="MathJax-Span-72"><span class="mtext" id="MathJax-Span-73" style="font-family: STIXGeneral-Regular;">Player</span><span class="mo" id="MathJax-Span-74" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-75" style="font-family: STIXGeneral-Italic;">s</span><span class="mo" id="MathJax-Span-76" style="font-family: STIXGeneral-Regular;">)</span></span><span style="display: inline-block; width: 0px; height: 2.503em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 1.191em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-12">\text{Player}(s)</script>, which returns the player whose turn it is;
<span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-13-Frame" tabindex="0" style=""><nobr><span class="math" id="MathJax-Span-77" style="width: 5.003em; display: inline-block;"><span style="display: inline-block; position: relative; width: 4.169em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.669em, 1004.12em, 2.815em, -999.997em); top: -2.497em; left: 0em;"><span class="mrow" id="MathJax-Span-78"><span class="mtext" id="MathJax-Span-79" style="font-family: STIXGeneral-Regular;">Actions</span><span class="mo" id="MathJax-Span-80" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-81" style="font-family: STIXGeneral-Italic;">s</span><span class="mo" id="MathJax-Span-82" style="font-family: STIXGeneral-Regular;">)</span></span><span style="display: inline-block; width: 0px; height: 2.503em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left: 0px solid; width: 0px; height: 1.191em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-13">\text{Actions}(s)</script>, which returns the possible actions;
and <span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-14-Frame" tabindex="0" style=""><nobr><span class="math" id="MathJax-Span-83" style="width: 4.794em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.961em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.669em, 1003.91em, 2.815em, -999.997em); top: -2.497em; left: 0em;"><span class="mrow" id="MathJax-Span-84"><span class="mtext" id="MathJax-Span-85" style="font-family: STIXGeneral-Regular;">Succ</span><span class="mo" id="MathJax-Span-86" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-87" style="font-family: STIXGeneral-Italic;">s</span><span class="mo" id="MathJax-Span-88" style="font-family: STIXGeneral-Regular;">,</span><span class="mi" id="MathJax-Span-89" style="font-family: STIXGeneral-Italic; padding-left: 0.211em;">a</span><span class="mo" id="MathJax-Span-90" style="font-family: STIXGeneral-Regular;">)</span></span><span style="display: inline-block; width: 0px; height: 2.503em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left: 0px solid; width: 0px; height: 1.128em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-14">\text{Succ}(s,a)</script>, which returns the successor state resulting from taking an action at a certain state.
You may use any relevant notation introduced in lecture.
    </p></li>
    <li class="code" id="1b">[10 points]
Now fill out
<code>MinimaxAgent</code> class in
<code><a href="http://web.stanford.edu/class/cs221/assignments/pacman/submission.py">submission.py</a></code> using the above recurrence.
Remember that your minimax
agent should work with any number of ghosts, and your minimax tree should have
multiple min layers (one for each ghost) for every max layer. <p></p>

<p>Your code should also expand the game tree to an arbitrary depth. Score the
leaves of your minimax tree with the supplied
<code>self.evaluationFunction</code>, which defaults to
<code>scoreEvaluationFunction</code>. The class
<code>MinimaxAgent</code> extends <code>MultiAgentSearchAgent</code>, which
gives access to <code>self.depth</code> and
<code>self.evaluationFunction</code>. Make sure your minimax code makes
reference to these two variables where appropriate as these variables are
populated from the command line options. 

</p><p>Other functions that you might use in the code:
<code>GameState.getLegalActions()</code> which returns all the possible legal
moves, where each move is <code>Directions.X</code> for some X in the set
{<code>NORTH, SOUTH, WEST, EAST, STOP</code>}. Go through
<code>ReflexAgent</code> code as suggested before to see how the above are used
and also for other important methods like <code>GameState.getPacmanState(),
  GameState.getGhostStates(), GameState.getScore()</code> etc. These are further documented inside
the <code>MinimaxAgent</code> class.</p>

<em><strong>Implementation Hints</strong></em>
<ul>
<li>Pac-Man is always agent 0, and the agents move in order of increasing agent index. Notice that only Pac-Man will actually be running your <code>MinimaxAgent</code>.

</li><li>All states in minimax should be <code>GameStates</code>, either passed in
to <code>getAction</code> or generated via
<code>GameState.generateSuccessor</code>. In this project, you will not be
abstracting to simplified states.

</li><li>The evaluation function in this part is already written (<code>self.evaluationFunction</code>), and you should call this function without changing it. Use <code>self.evaluationFunction</code> in your definition of <span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-15-Frame" tabindex="0" style=""><nobr><span class="math" id="MathJax-Span-91" style="width: 3.648em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.023em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(0.159em, 1003.02em, 1.305em, -999.997em); top: -0.987em; left: 0em;"><span class="mrow" id="MathJax-Span-92"><span class="msubsup" id="MathJax-Span-93"><span style="display: inline-block; position: relative; width: 3.023em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.68em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-94" style="font-family: STIXGeneral-Italic;">V<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.055em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.628em;"><span class="mtext" id="MathJax-Span-95" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">minmax</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 0.992em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left: 0px solid; width: 0px; height: 1.128em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-15">V_\text{minmax}</script> wherever you used <span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-16-Frame" tabindex="0" style=""><nobr><span class="math" id="MathJax-Span-96" style="width: 3.44em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.867em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.669em, 1002.82em, 2.815em, -999.997em); top: -2.497em; left: 0em;"><span class="mrow" id="MathJax-Span-97"><span class="mtext" id="MathJax-Span-98" style="font-family: STIXGeneral-Regular;">Eval</span><span class="mo" id="MathJax-Span-99" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-100" style="font-family: STIXGeneral-Italic;">s</span><span class="mo" id="MathJax-Span-101" style="font-family: STIXGeneral-Regular;">)</span></span><span style="display: inline-block; width: 0px; height: 2.503em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left: 0px solid; width: 0px; height: 1.191em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-16">\text{Eval}(s)</script> in part <span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-17-Frame" tabindex="0" style=""><nobr><span class="math" id="MathJax-Span-102" style="width: 1.201em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.992em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.669em, 1000.99em, 2.659em, -999.997em); top: -2.497em; left: 0em;"><span class="mrow" id="MathJax-Span-103"><span class="mn" id="MathJax-Span-104" style="font-family: STIXGeneral-Regular;">1</span><span class="mi" id="MathJax-Span-105" style="font-family: STIXGeneral-Italic;">a</span></span><span style="display: inline-block; width: 0px; height: 2.503em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 0.941em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-17">1a</script>. Recognize that now we're evaluating <i>states</i> rather than actions. Look-ahead agents evaluate future states whereas reflex agents evaluate actions from the current state. </li>

<li>You can assume that if the game hasn't end, <code>getLegalActions</code> function will return at least one action. If the game has ended, <code>getLegalActions</code> function will return an empty list.

</li><li>If there is a tie between multiple actions for the best move, you may break the tie however you see fit.

</li><li>The minimax values of the initial state in the <code>minimaxClassic</code> layout are 9, 8, 7, -492 for depths 1, 2, 3 and 4 respectively. <b>You can use these numbers to verify whether your implementation is correct.</b> Note that your minimax agent will often win (60-70% of the time for us--be sure to test on a large number of games using the <code>-n</code> and <code>-q</code> flags) despite the dire prediction of depth 4 minimax.

<pre>python pacman.py -p MinimaxAgent -l minimaxClassic -a depth=4</pre>
</li></ul>
<em><strong>Further Observations(Do not submit)</strong></em>
<ul>
<li>On larger boards such as <code>openClassic</code> and
<code>mediumClassic</code> (the default), you'll find Pac-Man to be good at not
dying, but quite bad at winning. He'll often thrash around without making
progress. He might even thrash around right next to a dot without eating it.
Don't worry if you see this behavior. Why does Pac-Man thrash around right next to a dot?
(These questions are here for you to ponder upon; no need to
include in the write-up.)

</li><li>Consider the following run:

<pre>python pacman.py -p MinimaxAgent -l trappedClassic -a depth=3</pre>

Why do you think Pac-Man rushes the closest ghost in minimax search on
<code>trappedClassic</code>? 

<!--
<li>To increase the search depth achievable by your agent, remove the <code>Directions.STOP</code> action from Pac-Man's list of possible actions. Depth 2 should be pretty quick, but depth 3 or 4 will be slow. Don't worry, the next problem will speed up the search somewhat.

<li>You are welcome to, but not required to, remove <code>Directions.STOP</code> as a valid action (this is true for any part of the assignment).
-->

</li></ul>

</li>
</ol>

<div class="problemTitle">Problem 2: Alpha-beta pruning</div>

<ol class="problem">

<li class="code" id="2a">[10 points]
Make a new agent that uses alpha-beta
pruning to more efficiently explore the minimax tree in
<code>AlphaBetaAgent</code>. Again, your algorithm will be slightly more
general than the pseudo-code in the slides, so part of the challenge is to
extend the alpha-beta pruning logic appropriately to multiple minimizer agents. 

<p>You should see a speed-up (perhaps depth 3 alpha-beta will run as fast as
depth 2 minimax). Ideally, depth 3 on <code>mediumClassic</code> should run in
just a few seconds per move or faster. 

</p><pre>python pacman.py -p AlphaBetaAgent -a depth=3</pre>

<p>The <code>AlphaBetaAgent</code> minimax values should be identical to the
<code>MinimaxAgent</code> minimax values, although the actions it selects can
vary because of different tie-breaking behavior. Again, the minimax values of
the initial state in the <code>minimaxClassic</code> layout are 9, 8, 7, and
-492 for depths 1, 2, 3, and 4, respectively. Running the command given above this
paragraph, the minimax values of the initial state should be 9, 18, 27, and 36
for depths 1, 2, 3, and 4, respectively.
    </p></li>
</ol>

<div class="problemTitle">Problem 3: Expectimax</div>

<ol class="problem">
  <li class="writeup" id="3a">[5 points]
Random ghosts are of course not optimal
minimax agents, so modeling them with minimax search is not
optimal. Instead, write down the recurrence for <span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-18-Frame" tabindex="0" style=""><nobr><span class="math" id="MathJax-Span-106" style="width: 6.253em; display: inline-block;"><span style="display: inline-block; position: relative; width: 5.211em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.669em, 1005.16em, 2.971em, -999.997em); top: -2.497em; left: 0em;"><span class="mrow" id="MathJax-Span-107"><span class="msubsup" id="MathJax-Span-108"><span style="display: inline-block; position: relative; width: 3.128em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.68em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-109" style="font-family: STIXGeneral-Italic;">V<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.055em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.628em;"><span class="texatom" id="MathJax-Span-110"><span class="mrow" id="MathJax-Span-111"><span class="mtext" id="MathJax-Span-112" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">exptmax</span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-113" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-114" style="font-family: STIXGeneral-Italic;">s</span><span class="mo" id="MathJax-Span-115" style="font-family: STIXGeneral-Regular;">,</span><span class="mi" id="MathJax-Span-116" style="font-family: STIXGeneral-Italic; padding-left: 0.211em;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.055em;"></span></span><span class="mo" id="MathJax-Span-117" style="font-family: STIXGeneral-Regular;">)</span></span><span style="display: inline-block; width: 0px; height: 2.503em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.434em; border-left: 0px solid; width: 0px; height: 1.316em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-18">V_{\text{exptmax}}(s,d)</script>,
which is the maximum expected utility against ghosts that each
follow the random policy which chooses a legal move uniformly at random.
Your recurrence should resemble that of Problem 1a (meaning you should write
it in terms of the same functions that were specified in 1a). 
    </li>
    <li class="code" id="3b">[10 points]
Fill in <code>ExpectimaxAgent</code>, where your agent
will no longer take the min over all ghost actions, but the expectation according to your agent's model of how the ghosts
act. Assume Pac-Man is playing against multiple <code>RandomGhost</code>, which each chooses
<code>getLegalActions</code> uniformly at random.

<p>You should now observe a more cavalier approach to close quarters with
ghosts. In particular, if Pac-Man perceives that he could be trapped but might
escape to grab a few more pieces of food, he'll at least try:

</p><pre>python pacman.py -p ExpectimaxAgent -l trappedClassic -a depth=3</pre>

You may have to run this scenario a few times to see Pac-Man's gamble pay off.
Pac-Man would win half the time on an average and for this particular command,
the final score would be -502 if Pac-Man loses and 532 or 531 (depending on your
tiebreaking method and the particular trial) if it wins (you can use these
numbers to validate your implementation).

<p>Why does Pac-Man's behavior in
expectimax differ from the minimax case (i.e., why doesn't he head directly for
the ghosts)? Again, just think about it; no need to write it up.</p>

</li>
</ol>

<div class="problemTitle">Problem 4: Evaluation function (extra credit)</div>

<ol class="problem">
    <li class="code" id="4a">[13 points]
Write a better evaluation function for Pac-Man in the provided function
<code>betterEvaluationFunction</code>.
The evaluation function should evaluate states (rather than actions).
You may use any tools at your disposal for evaluation, including any <code><a href="http://web.stanford.edu/class/cs221/assignments/pacman/util.py">util.py</a></code> code
from the previous assignments. With depth 2 search, your evaluation function
should clear the <code>smallClassic</code> layout with two random ghosts more
than half the time for full credit and still run at a reasonable rate.

<pre>python pacman.py -l smallClassic -p ExpectimaxAgent -a evalFn=better -q -n 10</pre>

We will run your Pac-Man agent 20 times, and calculate the average score you obtained in the winning games.
Starting from 1300, you obtain 1 point per 100 point increase in your average winning score.
In <code><a href="http://web.stanford.edu/class/cs221/assignments/pacman/grader.py">grader.py</a></code>, you can see the how extra credit is awarded.
In addition, the top 3 people in the class will get additional points.<br><br>

Check out the current top scorers on the <a href="https://www.gradescope.com/courses/52612/assignments/224007/leaderboard">leaderboard</a>!
You will be added automatically when you submit.

<p><em><strong>Hints and Observations(Do not submit)</strong></em>
</p><ul>
<li>Having gone through the rest of the assignment, you should play Pac-Man again yourself and think about what kinds of features you want to add to the evaluation function. How can you add multiple features to your evaluation function?
</li><li>You may want to use the reciprocal of important values rather than the values themselves for your features.</li>
<li>The betterEvaluationFunction should run in the same time limit as the other problems.
</li></ul>

</li>
  <li class="writeup" id="4b">[2 points]
    Clearly describe your evaluation function.
    What is the high-level motivation?
    Also talk about what else you tried, what worked and what didn't.
	Please write your thoughts in <code>pacman.pdf</code> (not in code comments).
  </li>
</ol>

<p><em>Go Pac-Man Go!</em></p>
<br>
<b>Files:</b>

<table border="0" cellpadding="10">
  
  <tbody><tr><td><code><a href="http://web.stanford.edu/class/cs221/assignments/pacman/submission.py">submission.py</a></code></td>
  <td>Where all of your multi-agent search agents will reside and the only file
    you need to concern yourself with for this assignment.</td></tr>
  
  <tr><td><code><a href="http://web.stanford.edu/class/cs221/assignments/pacman/pacman.py">pacman.py</a></code>
  </td><td>The main file that runs Pac-Man games. This file also describes a Pac-Man <code>GameState</code> type, which you will use extensively in this project</td></tr>

  <tr><td><code><a href="http://web.stanford.edu/class/cs221/assignments/pacman/game.py">game.py</a></code></td>
  <td>The logic behind how the Pac-Man world works. This file describes several supporting types like AgentState, Agent, Direction, and Grid.</td></tr>

  <tr><td><code><a href="http://web.stanford.edu/class/cs221/assignments/pacman/util.py">util.py</a></code></td>
  <td>Useful data structures for implementing search algorithms.</td></tr>
  <tr><td><code><a href="http://web.stanford.edu/class/cs221/assignments/pacman/graphicsDisplay.py">graphicsDisplay.py</a></code></td>
  <td>Graphics for Pac-Man</td></tr>
    
    <tr><td><code><a href="http://web.stanford.edu/class/cs221/assignments/pacman/graphicsUtils.py">graphicsUtils.py</a></code></td>
  <td>Support for Pac-Man graphics</td></tr>

  <tr><td><code><a href="http://web.stanford.edu/class/cs221/assignments/pacman/textDisplay.py">textDisplay.py</a></code></td>
  <td>ASCII graphics for Pac-Man</td></tr>  

    <tr><td><code><a href="http://web.stanford.edu/class/cs221/assignments/pacman/ghostAgents.py">ghostAgents.py</a></code></td>
  <td>Agents to control ghosts</td></tr>

    <tr><td><code><a href="http://web.stanford.edu/class/cs221/assignments/pacman/keyboardAgents.py">keyboardAgents.py</a></code></td>
  <td>Keyboard interfaces to control Pac-Man</td></tr>

    <tr><td><code><a href="http://web.stanford.edu/class/cs221/assignments/pacman/layout.py">layout.py</a></code></td>
  <td>Code for reading layout files and storing their contents</td></tr>

</tbody></table>

<p>&nbsp;



</p><div style="position: absolute; width: 0px; height: 0px; overflow: hidden; padding: 0px; border: 0px; margin: 0px;"><div id="MathJax_Font_Test" style="position: absolute; visibility: hidden; top: 0px; left: 0px; width: auto; padding: 0px; border: 0px; margin: 0px; white-space: nowrap; text-align: left; text-indent: 0px; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; font-size: 40px; font-weight: normal; font-style: normal; font-family: STIXSizeOneSym, sans-serif;"></div></div></body></html>